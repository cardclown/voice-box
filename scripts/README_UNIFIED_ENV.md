# ç»Ÿä¸€ç¯å¢ƒé…ç½®å’Œéƒ¨ç½²è„šæœ¬

## ğŸ“ è„šæœ¬è¯´æ˜

### 1. setup-unified-environment.sh
**ä½ç½®**ï¼š`scripts/server/setup-unified-environment.sh`  
**ç”¨é€”**ï¼šåœ¨æœåŠ¡å™¨ä¸Šé…ç½®ç»Ÿä¸€çš„Java 1.8å’ŒMaven 3.6.3ç¯å¢ƒ  
**æ‰§è¡Œä½ç½®**ï¼šæœåŠ¡å™¨ä¸Šï¼ˆéœ€è¦rootæƒé™ï¼‰

### 2. deploy-with-unified-env.sh
**ä½ç½®**ï¼š`scripts/deploy-with-unified-env.sh`  
**ç”¨é€”**ï¼šä¸€é”®é…ç½®æœåŠ¡å™¨ç¯å¢ƒå¹¶éƒ¨ç½²åº”ç”¨  
**æ‰§è¡Œä½ç½®**ï¼šæœ¬åœ°

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
./scripts/deploy-with-unified-env.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… æ£€æŸ¥æœ¬åœ°ç¯å¢ƒï¼ˆJava 1.8 + Maven 3.6.3ï¼‰
2. âœ… ä¸Šä¼ ç¯å¢ƒé…ç½®è„šæœ¬åˆ°æœåŠ¡å™¨
3. âœ… åœ¨æœåŠ¡å™¨ä¸Šé…ç½®ç»Ÿä¸€ç¯å¢ƒ
4. âœ… ç¼–è¯‘é¡¹ç›®
5. âœ… éƒ¨ç½²åˆ°æœåŠ¡å™¨
6. âœ… å¯åŠ¨æœåŠ¡

### æ–¹å¼2ï¼šåˆ†æ­¥æ‰§è¡Œ

#### æ­¥éª¤1ï¼šé…ç½®æœåŠ¡å™¨ç¯å¢ƒ

```bash
# ä¸Šä¼ è„šæœ¬åˆ°æœåŠ¡å™¨
scp scripts/server/setup-unified-environment.sh root@129.211.180.183:/tmp/

# SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh root@129.211.180.183

# æ‰§è¡Œé…ç½®è„šæœ¬ï¼ˆéœ€è¦rootæƒé™ï¼‰
chmod +x /tmp/setup-unified-environment.sh
sudo /tmp/setup-unified-environment.sh

# é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡
source /etc/profile

# éªŒè¯ç¯å¢ƒ
java -version  # åº”è¯¥æ˜¾ç¤º 1.8.0
mvn -version   # åº”è¯¥æ˜¾ç¤º 3.6.3
```

#### æ­¥éª¤2ï¼šç¼–è¯‘å’Œéƒ¨ç½²

```bash
# åœ¨æœ¬åœ°ç¼–è¯‘
mvn clean package -DskipTests

# éƒ¨ç½²åˆ°æœåŠ¡å™¨
./deploy/deploy-prod.sh
```

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Java | 1.8 | ç»Ÿä¸€ä½¿ç”¨Java 8 |
| Maven | 3.6.3 | ç»Ÿä¸€ä½¿ç”¨Maven 3.6.3 |
| æ“ä½œç³»ç»Ÿ | CentOS 7+ | æœåŠ¡å™¨æ“ä½œç³»ç»Ÿ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½ç°æœ‰é…ç½®åˆ° `/root/environment-backup-YYYYMMDD_HHMMSS/`

2. **æƒé™**ï¼šç¯å¢ƒé…ç½®è„šæœ¬éœ€è¦rootæƒé™æ‰§è¡Œ

3. **ç½‘ç»œ**ï¼šéœ€è¦èƒ½å¤Ÿè®¿é—®Mavenä¸­å¤®ä»“åº“æˆ–é…ç½®å›½å†…é•œåƒ

4. **ç¯å¢ƒå˜é‡**ï¼šé…ç½®å®Œæˆåéœ€è¦é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æˆ–é‡æ–°ç™»å½•

---

## ğŸ” éªŒè¯ç¯å¢ƒ

### æœ¬åœ°ç¯å¢ƒ

```bash
java -version
# è¾“å‡ºåº”åŒ…å«: java version "1.8.0"

mvn -version
# è¾“å‡ºåº”åŒ…å«: Apache Maven 3.6.3
```

### æœåŠ¡å™¨ç¯å¢ƒ

```bash
ssh root@129.211.180.183 "java -version && mvn -version"
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šMavenä¸‹è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
cd /tmp
wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
```

### é—®é¢˜2ï¼šç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡æ–°åŠ è½½
source /etc/profile

# æˆ–è€…é‡æ–°ç™»å½•
exit
ssh root@129.211.180.183
```

### é—®é¢˜3ï¼šæƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨sudoæ‰§è¡Œ
sudo /tmp/setup-unified-environment.sh
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç»Ÿä¸€ç¯å¢ƒé…ç½®æŒ‡å—](../docs/UNIFIED_ENVIRONMENT_GUIDE.md) - è¯¦ç»†çš„ç¯å¢ƒé…ç½®æ–‡æ¡£
- [éƒ¨ç½²æŒ‡å—](../deploy/README.md) - éƒ¨ç½²æµç¨‹è¯´æ˜
- [å¿«é€Ÿå¼€å§‹](../QUICK_START.md) - é¡¹ç›®å¿«é€Ÿå¼€å§‹æŒ‡å—

---

## ğŸ’¡ æç¤º

- é¦–æ¬¡é…ç½®æœåŠ¡å™¨ç¯å¢ƒæ—¶ï¼Œå»ºè®®ä½¿ç”¨æ–¹å¼1ï¼ˆä¸€é”®éƒ¨ç½²ï¼‰
- åç»­éƒ¨ç½²å¯ä»¥ç›´æ¥ä½¿ç”¨ `./deploy/deploy-prod.sh`
- å®šæœŸæ£€æŸ¥ç¯å¢ƒç‰ˆæœ¬ï¼Œç¡®ä¿æœ¬åœ°å’ŒæœåŠ¡å™¨ä¸€è‡´

---

**æœ€åæ›´æ–°**ï¼š2024-11-30
